var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(b){var a=this;b.onblob=function(b){b=window.atob(b);for(var g=new ArrayBuffer(b.length),d=new Uint8Array(g),f=0;f<b.length;f++)d[f]=b.charCodeAt(f);if(a.ondata)a.ondata(g)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ondata=null};Guacamole=Guacamole||{};
Guacamole.ArrayBufferWriter=function(b){function a(a){for(var g="",f=0;f<a.byteLength;f++)g+=String.fromCharCode(a[f]);b.sendBlob(window.btoa(g))}var k=this;b.onack=function(a){if(k.onack)k.onack(a)};this.sendData=function(b){b=new Uint8Array(b);if(8064>=b.length)a(b);else for(var d=0;d<b.length;d+=8064)a(b.subarray(d,d+8094))};this.sendEnd=function(){b.sendEnd()};this.onack=null};Guacamole=Guacamole||{};
Guacamole.AudioChannel=function(){var b=0;this.play=function(a,k,g){a=new Guacamole.AudioChannel.Packet(a,g);g=Guacamole.AudioChannel.getTimestamp();b<g&&(b=g);a.play(b);b+=k}};if(window.webkitAudioContext||window.AudioContext)Guacamole.AudioChannel.context=new (window.AudioContext||window.webkitAudioContext);
Guacamole.AudioChannel.getTimestamp=function(){if(Guacamole.AudioChannel.context)return 1E3*Guacamole.AudioChannel.context.currentTime;if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return(new Date).getTime()};
Guacamole.AudioChannel.Packet=function(b,a){this.play=function(a){};if(Guacamole.AudioChannel.context){var k=function(a){m.buffer=a;m.start(e/1E3)},g=null,d=function(a){g=a},f=new FileReader;f.onload=function(){Guacamole.AudioChannel.context.decodeAudioData(f.result,function(a){d(a)})};f.readAsArrayBuffer(a);var m=Guacamole.AudioChannel.context.createBufferSource();m.connect(Guacamole.AudioChannel.context.destination);m.start||(m.start=m.noteOn);var e;this.play=function(a){e=a;g?k(g):d=k}}else{var l=
!1,h=null;try{h=new Audio}catch(n){}if(h){var p=function(){h.src?h.play():l=!0},f=new FileReader;f.onload=function(){for(var a="",d=new Uint8Array(f.result),g=0;g<d.byteLength;g++)a+=String.fromCharCode(d[g]);h.src="data:"+b+";base64,"+window.btoa(a);l&&h.play()};f.readAsArrayBuffer(a);this.play=function(a){var b=Guacamole.AudioChannel.getTimestamp();a-=b;0>a?p():window.setTimeout(p,a)}}}};Guacamole=Guacamole||{};
Guacamole.BlobReader=function(b,a){var k=this,g=0,d;d=window.BlobBuilder?new BlobBuilder:window.WebKitBlobBuilder?new WebKitBlobBuilder:window.MozBlobBuilder?new MozBlobBuilder:new function(){var b=[];this.append=function(d){b.push(new Blob([d],{type:a}))};this.getBlob=function(){return new Blob(b,{type:a})}};b.onblob=function(a){a=window.atob(a);for(var f=new ArrayBuffer(a.length),e=new Uint8Array(f),l=0;l<a.length;l++)e[l]=a.charCodeAt(l);d.append(f);g+=f.byteLength;if(k.onprogress)k.onprogress(f.byteLength);
b.sendAck("OK",0)};b.onend=function(){if(k.onend)k.onend()};this.getLength=function(){return g};this.getBlob=function(){return d.getBlob()};this.onend=this.onprogress=null};Guacamole=Guacamole||{};
Guacamole.Client=function(b){function a(c){if(c!=m&&(m=c,f.onstatechange))f.onstatechange(m)}function k(){return 3==m||2==m}function g(c){var a=q[c];a||(a=0===c?n.getDefaultLayer():0<c?n.createLayer():n.createBuffer(),q[c]=a);return a}function d(c){var a=u[c];null==a&&(a=u[c]=new Guacamole.AudioChannel);return a}var f=this,m=0,e=0,l=null,h={0:"butt",1:"round",2:"square"},p={0:"bevel",1:"miter",2:"round"},n=new Guacamole.Display,q={},r=[],u=[],t=[],w=new Guacamole.IntegerPool,x=[];this.getDisplay=
function(){return n};this.sendSize=function(c,a){k()&&b.sendMessage("size",c,a)};this.sendKeyEvent=function(c,a){k()&&b.sendMessage("key",a,c)};this.sendMouseState=function(c){if(k()){n.moveCursor(Math.floor(c.x),Math.floor(c.y));var a=0;c.left&&(a|=1);c.middle&&(a|=2);c.right&&(a|=4);c.up&&(a|=8);c.down&&(a|=16);b.sendMessage("mouse",Math.floor(c.x),Math.floor(c.y),a)}};this.setClipboard=function(c){if(k()){for(var a=f.createClipboardStream("text/plain"),a=new Guacamole.StringWriter(a),b=0;b<c.length;b+=
4096)a.sendText(c.substring(b,b+4096));a.sendEnd()}};this.createFileStream=function(c,a){var y=w.next();b.sendMessage("file",y,c,a);c=x[y]=new Guacamole.OutputStream(f,y);var d=c.sendEnd;c.sendEnd=function(){d();w.free(y);delete x[y]};return c};this.createPipeStream=function(c,a){var y=w.next();b.sendMessage("pipe",y,c,a);c=x[y]=new Guacamole.OutputStream(f,y);var d=c.sendEnd;c.sendEnd=function(){d();w.free(y);delete x[y]};return c};this.createClipboardStream=function(c){var a=w.next();b.sendMessage("clipboard",
a,c);c=x[a]=new Guacamole.OutputStream(f,a);var d=c.sendEnd;c.sendEnd=function(){d();w.free(a);delete x[a]};return c};this.sendAck=function(c,a,d){k()&&b.sendMessage("ack",c,a,d)};this.sendBlob=function(c,a){k()&&b.sendMessage("blob",c,a)};this.endStream=function(c){k()&&b.sendMessage("end",c)};this.onsync=this.onpipe=this.onfile=this.onclipboard=this.onerror=this.onname=this.onstatechange=null;var z={"miter-limit":function(c,a){n.setMiterLimit(c,parseFloat(a))}},v={ack:function(c){var a=parseInt(c[0]),
b=c[1];c=parseInt(c[2]);var d=x[a];if(d){if(d.onack)d.onack(new Guacamole.Status(c,b));256<=c&&(w.free(a),delete x[a])}},arc:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]),h=parseFloat(c[4]),f=parseFloat(c[5]);c=parseInt(c[6]);n.arc(a,b,d,e,h,f,0!=c)},audio:function(c){var a=parseInt(c[0]),b=d(parseInt(c[1])),g=c[2],e=parseFloat(c[3]);c=t[a]=new Guacamole.InputStream(f,a);var h=new Guacamole.BlobReader(c,g);h.onend=function(){b.play(g,e,h.getBlob())};f.sendAck(a,
"OK",0)},blob:function(c){var a=parseInt(c[0]);t[a].onblob(c[1])},cfill:function(c){var a=parseInt(c[0]),b=g(parseInt(c[1])),d=parseInt(c[2]),e=parseInt(c[3]),h=parseInt(c[4]);c=parseInt(c[5]);n.setChannelMask(b,a);n.fillColor(b,d,e,h,c)},clip:function(c){c=g(parseInt(c[0]));n.clip(c)},clipboard:function(c){var a=parseInt(c[0]);c=c[1];f.onclipboard?(a=t[a]=new Guacamole.InputStream(f,a),f.onclipboard(a,c)):f.sendAck(a,"Clipboard unsupported",256)},close:function(c){c=g(parseInt(c[0]));n.close(c)},
copy:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]),h=parseInt(c[4]),f=parseInt(c[5]),l=g(parseInt(c[6])),p=parseInt(c[7]);c=parseInt(c[8]);n.setChannelMask(l,f);n.copy(a,b,d,e,h,l,p,c)},cstroke:function(c){var a=parseInt(c[0]),b=g(parseInt(c[1])),d=h[parseInt(c[2])],e=p[parseInt(c[3])],f=parseInt(c[4]),l=parseInt(c[5]),u=parseInt(c[6]),z=parseInt(c[7]);c=parseInt(c[8]);n.setChannelMask(b,a);n.strokeColor(b,d,e,f,l,u,z,c)},cursor:function(c){var a=parseInt(c[0]),
b=parseInt(c[1]),d=g(parseInt(c[2])),e=parseInt(c[3]),h=parseInt(c[4]),f=parseInt(c[5]);c=parseInt(c[6]);n.setCursor(a,b,d,e,h,f,c)},curve:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]),h=parseInt(c[4]),f=parseInt(c[5]);c=parseInt(c[6]);n.curveTo(a,b,d,e,h,f,c)},dispose:function(c){c=parseInt(c[0]);0<c?(g(c).dispose(),delete q[c]):0>c&&delete q[c]},distort:function(c){var a=parseInt(c[0]),b=parseFloat(c[1]),d=parseFloat(c[2]),e=parseFloat(c[3]),h=parseFloat(c[4]),
f=parseFloat(c[5]);c=parseFloat(c[6]);0<=a&&g(a).distort(b,d,e,h,f,c)},error:function(c){var a=c[0];c=parseInt(c[1]);if(f.onerror)f.onerror(new Guacamole.Status(c,a));f.disconnect()},end:function(c){c=parseInt(c[0]);c=t[c];if(c.onend)c.onend()},file:function(c){var a=parseInt(c[0]),b=c[1];c=c[2];f.onfile?(a=t[a]=new Guacamole.InputStream(f,a),f.onfile(a,b,c)):f.sendAck(a,"File transfer unsupported",256)},identity:function(c){c=g(parseInt(c[0]));n.setTransform(c,1,0,0,1,0,0)},lfill:function(c){var a=
parseInt(c[0]),b=g(parseInt(c[1]));c=g(parseInt(c[2]));n.setChannelMask(b,a);n.fillLayer(b,c)},line:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]);c=parseInt(c[2]);n.lineTo(a,b,c)},lstroke:function(c){var a=parseInt(c[0]),b=g(parseInt(c[1]));c=g(parseInt(c[2]));n.setChannelMask(b,a);n.strokeLayer(b,c)},move:function(c){var a=parseInt(c[0]),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]);c=parseInt(c[4]);0<a&&0<=b&&(a=g(a),b=g(b),a.move(b,d,e,c))},name:function(c){if(f.onname)f.onname(c[0])},
nest:function(c){var a=parseInt(c[0]),d=r[a];null==d&&(d=r[a]=new Guacamole.Parser,d.oninstruction=b.oninstruction);d.receive(c[1])},pipe:function(c){var a=parseInt(c[0]),b=c[1];c=c[2];f.onpipe?(a=t[a]=new Guacamole.InputStream(f,a),f.onpipe(a,b,c)):f.sendAck(a,"Named pipes unsupported",256)},png:function(c){var a=parseInt(c[0]),b=g(parseInt(c[1])),d=parseInt(c[2]),e=parseInt(c[3]);c=c[4];n.setChannelMask(b,a);n.draw(b,d,e,"data:image/png;base64,"+c)},pop:function(c){c=g(parseInt(c[0]));n.pop(c)},
push:function(c){c=g(parseInt(c[0]));n.push(c)},rect:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]);c=parseInt(c[4]);n.rect(a,b,d,e,c)},reset:function(c){c=g(parseInt(c[0]));n.reset(c)},set:function(c){var a=g(parseInt(c[0])),b=c[2];(c=z[c[1]])&&c(a,b)},shade:function(c){var a=parseInt(c[0]);c=parseInt(c[1]);0<=a&&g(a).shade(c)},size:function(c){var a=parseInt(c[0]),a=g(a),b=parseInt(c[1]);c=parseInt(c[2]);n.resize(a,b,c)},start:function(c){var a=g(parseInt(c[0])),
b=parseInt(c[1]);c=parseInt(c[2]);n.moveTo(a,b,c)},sync:function(c){var d=parseInt(c[0]);n.flush(function(){d!==e&&(b.sendMessage("sync",d),e=d)});2===m&&a(3);if(f.onsync)f.onsync(d)},transfer:function(c){var a=g(parseInt(c[0])),b=parseInt(c[1]),d=parseInt(c[2]),e=parseInt(c[3]),h=parseInt(c[4]),f=parseInt(c[5]),l=g(parseInt(c[6])),p=parseInt(c[7]);c=parseInt(c[8]);3===f?n.put(a,b,d,e,h,l,p,c):5!==f&&n.transfer(a,b,d,e,h,l,p,c,Guacamole.Client.DefaultTransferFunction[f])},transform:function(c){var a=
g(parseInt(c[0])),b=parseFloat(c[1]),d=parseFloat(c[2]),e=parseFloat(c[3]),h=parseFloat(c[4]),f=parseFloat(c[5]);c=parseFloat(c[6]);n.transform(a,b,d,e,h,f,c)},video:function(c){var a=parseInt(c[0]),d=g(parseInt(c[1])),e=c[2],h=parseFloat(c[3]);c=t[a]=new Guacamole.InputStream(f,a);var l=new Guacamole.BlobReader(c,e);l.onend=function(){var c=new FileReader;c.onload=function(){for(var a="",b=new Uint8Array(c.result),g=0;g<b.byteLength;g++)a+=String.fromCharCode(b[g]);d.play(e,h,"data:"+e+";base64,"+
window.btoa(a))};c.readAsArrayBuffer(l.getBlob())};b.sendMessage("ack",a,"OK",0)}};b.oninstruction=function(c,a){(c=v[c])&&c(a)};this.disconnect=function(){5!=m&&4!=m&&(a(4),l&&window.clearInterval(l),b.sendMessage("disconnect"),b.disconnect(),a(5))};this.connect=function(c){a(1);try{b.connect(c)}catch(y){throw a(0),y;}l=window.setInterval(function(){b.sendMessage("sync",e)},5E3);a(2)}};
Guacamole.Client.DefaultTransferFunction={0:function(b,a){a.red=a.green=a.blue=0},15:function(b,a){a.red=a.green=a.blue=255},3:function(b,a){a.red=b.red;a.green=b.green;a.blue=b.blue;a.alpha=b.alpha},5:function(b,a){},12:function(b,a){a.red=255&~b.red;a.green=255&~b.green;a.blue=255&~b.blue;a.alpha=b.alpha},10:function(b,a){a.red=255&~a.red;a.green=255&~a.green;a.blue=255&~a.blue},1:function(b,a){a.red&=b.red;a.green&=b.green;a.blue&=b.blue},14:function(b,a){a.red=255&~(b.red&a.red);a.green=255&~(b.green&
a.green);a.blue=255&~(b.blue&a.blue)},7:function(b,a){a.red|=b.red;a.green|=b.green;a.blue|=b.blue},8:function(b,a){a.red=255&~(b.red|a.red);a.green=255&~(b.green|a.green);a.blue=255&~(b.blue|a.blue)},6:function(b,a){a.red^=b.red;a.green^=b.green;a.blue^=b.blue},9:function(b,a){a.red=255&~(b.red^a.red);a.green=255&~(b.green^a.green);a.blue=255&~(b.blue^a.blue)},4:function(b,a){a.red&=255&~b.red;a.green&=255&~b.green;a.blue&=255&~b.blue},13:function(b,a){a.red=255&(~b.red|a.red);a.green=255&(~b.green|
a.green);a.blue=255&(~b.blue|a.blue)},2:function(b,a){a.red=255&b.red&~a.red;a.green=255&b.green&~a.green;a.blue=255&b.blue&~a.blue},11:function(b,a){a.red=255&(b.red|~a.red);a.green=255&(b.green|~a.green);a.blue=255&(b.blue|~a.blue)}};Guacamole=Guacamole||{};
Guacamole.Display=function(){function b(){for(var a=0;a<r.length;){var b=r[a];if(!b.isReady())break;b.flush();a++}r.splice(0,a)}function a(a,b){this.isReady=function(){for(var a=0;a<b.length;a++)if(b[a].blocked)return!1;return!0};this.flush=function(){for(var d=0;d<b.length;d++)b[d].execute();a&&a()}}function k(a,d){var e=this;this.blocked=d;this.unblock=function(){e.blocked&&(e.blocked=!1,b())};this.execute=function(){a&&a()}}function g(a,b){a=new k(a,b);q.push(a);return a}var d=this,f=0,m=0,e=1,
l=document.createElement("div");l.style.position="relative";l.style.width=f+"px";l.style.height=m+"px";l.style.transformOrigin=l.style.webkitTransformOrigin=l.style.MozTransformOrigin=l.style.OTransformOrigin=l.style.msTransformOrigin="0 0";var h=new Guacamole.Display.VisibleLayer(f,m),p=new Guacamole.Display.VisibleLayer(0,0);p.setChannelMask(Guacamole.Layer.SRC);l.appendChild(h.getElement());l.appendChild(p.getElement());var n=document.createElement("div");n.style.position="relative";n.style.width=
f*e+"px";n.style.height=m*e+"px";n.appendChild(l);this.cursorY=this.cursorX=this.cursorHotspotY=this.cursorHotspotX=0;this.oncursor=this.onresize=null;var q=[],r=[];this.getElement=function(){return n};this.getWidth=function(){return f};this.getHeight=function(){return m};this.getDefaultLayer=function(){return h};this.getCursorLayer=function(){return p};this.createLayer=function(){var a=new Guacamole.Display.VisibleLayer(f,m);a.move(h,0,0,0);return a};this.createBuffer=function(){var a=new Guacamole.Layer(0,
0);a.autosize=1;return a};this.flush=function(d){r.push(new a(d,q));q=[];b()};this.setCursor=function(a,b,e,h,f,l,c){g(function(){d.cursorHotspotX=a;d.cursorHotspotY=b;p.resize(l,c);p.copy(e,h,f,l,c,0,0);d.moveCursor(d.cursorX,d.cursorY);if(d.oncursor)d.oncursor(p.getCanvas(),a,b)})};this.showCursor=function(a){var b=p.getElement(),d=b.parentNode;!1===a?d&&d.removeChild(b):d!==l&&l.appendChild(b)};this.moveCursor=function(a,b){p.translate(a-d.cursorHotspotX,b-d.cursorHotspotY);d.cursorX=a;d.cursorY=
b};this.resize=function(a,b,p){g(function(){a.resize(b,p);if(a===h&&(f=b,m=p,l.style.width=f+"px",l.style.height=m+"px",n.style.width=f*e+"px",n.style.height=m*e+"px",d.onresize))d.onresize(b,p)})};this.drawImage=function(a,b,d,e){g(function(){a.drawImage(b,d,e)})};this.draw=function(a,b,d,e){var h=g(function(){a.drawImage(b,d,f)},!0),f=new Image;f.onload=h.unblock;f.src=e};this.play=function(a,b,d,e){var h=document.createElement("video");h.type=b;h.src=e;h.addEventListener("play",function(){function b(){a.drawImage(0,
0,h);h.ended||window.setTimeout(b,20)}b()},!1);g(h.play)};this.transfer=function(a,b,d,e,h,f,c,l,n){g(function(){f.transfer(a,b,d,e,h,c,l,n)})};this.put=function(a,b,d,e,h,f,c,l){g(function(){f.put(a,b,d,e,h,c,l)})};this.copy=function(a,b,d,e,h,f,c,l){g(function(){f.copy(a,b,d,e,h,c,l)})};this.moveTo=function(a,b,d){g(function(){a.moveTo(b,d)})};this.lineTo=function(a,b,d){g(function(){a.lineTo(b,d)})};this.arc=function(a,b,d,e,h,f,c){g(function(){a.arc(b,d,e,h,f,c)})};this.curveTo=function(a,b,d,
e,h,f,c){g(function(){a.curveTo(b,d,e,h,f,c)})};this.close=function(a){g(function(){a.close()})};this.rect=function(a,b,d,e,h){g(function(){a.rect(b,d,e,h)})};this.clip=function(a){g(function(){a.clip()})};this.strokeColor=function(a,b,d,e,h,f,c,l){g(function(){a.strokeColor(b,d,e,h,f,c,l)})};this.fillColor=function(a,b,d,e,h){g(function(){a.fillColor(b,d,e,h)})};this.strokeLayer=function(a,b,d,e,h){g(function(){a.strokeLayer(b,d,e,h)})};this.fillLayer=function(a,b){g(function(){a.fillLayer(b)})};
this.push=function(a){g(function(){a.push()})};this.pop=function(a){g(function(){a.pop()})};this.reset=function(a){g(function(){a.reset()})};this.setTransform=function(a,b,d,e,h,f,c){g(function(){a.setTransform(b,d,e,h,f,c)})};this.transform=function(a,b,d,e,h,f,c){g(function(){a.transform(b,d,e,h,f,c)})};this.setChannelMask=function(a,b){g(function(){a.setChannelMask(b)})};this.setMiterLimit=function(a,b){g(function(){a.setMiterLimit(b)})};this.scale=function(a){l.style.transform=l.style.WebkitTransform=
l.style.MozTransform=l.style.OTransform=l.style.msTransform="scale("+a+","+a+")";e=a;n.style.width=f*e+"px";n.style.height=m*e+"px"};this.getScale=function(){return e};this.flatten=function(){function a(a){var b=[],c;for(c in a.children)b.push(a.children[c]);b.sort(function(a,c){var b=a.z-c.z;if(0!==b)return b;a=a.getElement();c=c.getElement().compareDocumentPosition(a);return c&Node.DOCUMENT_POSITION_PRECEDING?-1:c&Node.DOCUMENT_POSITION_FOLLOWING?1:0});return b}function b(d,h,c){if(0<d.width&&0<
d.height){var f=e.globalAlpha;e.globalAlpha*=d.alpha/255;e.drawImage(d.getCanvas(),h,c);d=a(d);for(var g=0;g<d.length;g++){var l=d[g];b(l,h+l.x,c+l.y)}e.globalAlpha=f}}var d=document.createElement("canvas");d.width=h.width;d.height=h.height;var e=d.getContext("2d");b(h,0,0);return d}};
Guacamole.Display.VisibleLayer=function(b,a){Guacamole.Layer.apply(this,[b,a]);var k=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=255;this.z=this.y=this.x=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var g=k.getCanvas();g.style.position="absolute";g.style.left="0px";g.style.top="0px";var d=document.createElement("div");d.appendChild(g);d.style.width=b+"px";d.style.height=a+"px";d.style.position="absolute";d.style.left="0px";d.style.top="0px";d.style.overflow=
"hidden";var f=this.resize;this.resize=function(a,b){d.style.width=a+"px";d.style.height=b+"px";f(a,b)};this.getElement=function(){return d};var m="translate(0px, 0px)",e="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(a,b){k.x=a;k.y=b;m="translate("+a+"px,"+b+"px)";d.style.transform=d.style.WebkitTransform=d.style.MozTransform=d.style.OTransform=d.style.msTransform=m+" "+e};this.move=function(a,b,e,f){k.parent!==a&&(k.parent&&delete k.parent.children[k.__unique_id],k.parent=a,a.children[k.__unique_id]=
k,a.getElement().appendChild(d));k.translate(b,e);k.z=f;d.style.zIndex=f};this.shade=function(a){k.alpha=a;d.style.opacity=a/255};this.dispose=function(){k.parent&&(delete k.parent.children[k.__unique_id],k.parent=null);d.parentNode&&d.parentNode.removeChild(d)};this.distort=function(a,b,f,g,q,r){k.matrix=[a,b,f,g,q,r];e="matrix("+a+","+b+","+f+","+g+","+q+","+r+")";d.style.transform=d.style.WebkitTransform=d.style.MozTransform=d.style.OTransform=d.style.msTransform=m+" "+e}};
Guacamole.Display.VisibleLayer.__next_id=0;Guacamole=Guacamole||{};Guacamole.InputStream=function(b,a){var k=this;this.index=a;this.onend=this.onblob=null;this.sendAck=function(a,d){b.sendAck(k.index,a,d)}};Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var b=this,a=[];this.next_int=0;this.next=function(){return 0<a.length?a.shift():b.next_int++};this.free=function(b){a.push(b)}};Guacamole=Guacamole||{};
Guacamole.Keyboard=function(b){function a(a,b){return a?a[b]||a[0]:null}function k(c,b,d){if(!c)return null;var e=c.indexOf("U+");if(0<=e)c=c.substring(e+2),c=String.fromCharCode(parseInt(c,16));else if(1!==c.length)return a(u[c],b);!0===d?c=c.toUpperCase():!1===d&&(c=c.toLowerCase());d=c.charCodeAt(0);return g(d)}function g(a){return 31>=a||127<=a&&159>=a?65280|a:0<=a&&255>=a?a:256<=a&&1114111>=a?16777216|a:null}function d(a){a=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(a);e.modifiers.alt&&
!1===a.alt&&(e.release(65513),e.release(65514),e.release(65027));e.modifiers.shift&&!1===a.shift&&(e.release(65505),e.release(65506));e.modifiers.ctrl&&!1===a.ctrl&&(e.release(65507),e.release(65508));e.modifiers.meta&&!1===a.meta&&(e.release(65511),e.release(65512));e.modifiers.hyper&&!1===a.hyper&&(e.release(65515),e.release(65516));e.modifiers=a}function f(){var a=m();if(!a)return!1;var b;do b=a,a=m();while(null!==a);return b.defaultPrevented}function m(){var a=q[0];if(!a)return null;if(a instanceof
h){var b=null,d=[];a.reliable?(b=a.keysym,d=q.splice(0,1)):q[1]instanceof p?(b=q[1].keysym,d=q.splice(0,2)):q[1]&&(b=a.keysym,d=q.splice(0,1));if(0<d.length){if(b){e.modifiers.ctrl&&e.modifiers.alt&&!(65<=b&&90>=b||97<=b&&122>=b)&&(255>=b||16777216===(b&4278190080))&&(e.release(65507),e.release(65508),e.release(65513),e.release(65514));var f=!e.press(b);x[a.keyCode]=b;e.modifiers.meta&&65511!==b&&65512!==b&&e.release(b);for(b=0;b<d.length;b++)d[b].defaultPrevented=f}return a}}else return a instanceof
n&&(b=a.keysym)&&(e.release(b),a.defaultPrevented=!0),q.shift();return null}var e=this;this.onkeyup=this.onkeydown=null;var l=function(){var a=this;this.timestamp=(new Date).getTime();this.defaultPrevented=!1;this.keysym=null;this.reliable=!1;this.getAge=function(){return(new Date).getTime()-a.timestamp}},h=function(c,b,d,h){l.apply(this);this.keyCode=c;this.keyIdentifier=b;this.key=d;this.location=h;if(this.keysym=k(d,h)||a(r[c],h))this.reliable=!0;if(d=!this.keysym)b?(d=b.indexOf("U+"),-1===d?d=
!0:(d=parseInt(b.substring(d+2),16),d=c!==d||65<=c&&90>=c||48<=c&&57>=c?!0:!1)):d=!1;d&&(this.keysym=k(b,h,e.modifiers.shift));b=!e.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i));if(!e.modifiers.alt&&e.modifiers.ctrl||b&&e.modifiers.alt||e.modifiers.meta||e.modifiers.hyper)this.reliable=!0;x[c]=this.keysym};h.prototype=new l;var p=function(a){l.apply(this);this.charCode=a;this.keysym=g(a);this.reliable=!0};p.prototype=new l;var n=function(c,b,d,e){l.apply(this);
this.keyCode=c;this.keyIdentifier=b;this.key=d;this.location=e;this.keysym=x[c]||a(r[c],e)||k(d,e);this.reliable=!0};n.prototype=new l;var q=[],r={8:[65288],9:[65289],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365],34:[65366],35:[65367],36:[65360],37:[65361],38:[65362],39:[65363],40:[65364],45:[65379],46:[65535],91:[65515],92:[65383],93:null,112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],
119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},u={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],DeadGrave:[65104],
DeadAcute:[65105],DeadCircumflex:[65106],DeadTilde:[65107],DeadMacron:[65108],DeadBreve:[65109],DeadAboveDot:[65110],DeadUmlaut:[65111],DeadAboveRing:[65112],DeadDoubleacute:[65113],DeadCaron:[65114],DeadCedilla:[65115],DeadOgonek:[65116],DeadIota:[65117],DeadVoicedSound:[65118],DeadSemivoicedSound:[65119],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],
F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],
JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[64797],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],Up:[65362],Undo:[65381],
Win:[65515],Zenkaku:[65320],ZenkakuHankaku:[65322]},t={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0};this.modifiers=new Guacamole.Keyboard.ModifierState;this.pressed={};var w={},x={},z=null,v=null;this.press=function(a){if(null!==a){if(!e.pressed[a]&&(e.pressed[a]=!0,e.onkeydown)){var c=e.onkeydown(a);w[a]=c;window.clearTimeout(z);window.clearInterval(v);t[a]||(z=window.setTimeout(function(){v=window.setInterval(function(){e.onkeyup(a);e.onkeydown(a)},
50)},500));return c}return w[a]||!1}};this.release=function(a){if(e.pressed[a]&&(delete e.pressed[a],window.clearTimeout(z),window.clearInterval(v),null!==a&&e.onkeyup))e.onkeyup(a)};this.reset=function(){for(var a in e.pressed)e.release(parseInt(a));q=[]};b.addEventListener("keydown",function(a){if(e.onkeydown){var c;window.event?c=window.event.keyCode:a.which&&(c=a.which);d(a);229!==c&&(c=new h(c,a.keyIdentifier,a.key,a.location||a.keyLocation),q.push(c),f()&&a.preventDefault())}},!0);b.addEventListener("keypress",
function(a){if(e.onkeydown||e.onkeyup){var c;window.event?c=window.event.keyCode:a.which&&(c=a.which);d(a);c=new p(c);q.push(c);f()&&a.preventDefault()}},!0);b.addEventListener("keyup",function(a){if(e.onkeyup){a.preventDefault();var c;window.event?c=window.event.keyCode:a.which&&(c=a.which);d(a);a=new n(c,a.keyIdentifier,a.key,a.location||a.keyLocation);q.push(a);f()}},!0)};Guacamole.Keyboard.ModifierState=function(){this.hyper=this.meta=this.alt=this.ctrl=this.shift=!1};
Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(b){var a=new Guacamole.Keyboard.ModifierState;a.shift=b.shiftKey;a.ctrl=b.ctrlKey;a.alt=b.altKey;a.meta=b.metaKey;b.getModifierState&&(a.hyper=b.getModifierState("OS")||b.getModifierState("Super")||b.getModifierState("Hyper")||b.getModifierState("Win"));return a};Guacamole=Guacamole||{};
Guacamole.Layer=function(b,a){function k(a,b,d,e){a=d+a;b=e+b;g.resize(a>g.width?a:g.width,b>g.height?b:g.height)}var g=this,d=document.createElement("canvas"),f=d.getContext("2d");f.save();var m=!0,e=0,l={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};this.autosize=!1;this.width=b;this.height=a;this.getCanvas=function(){return d};this.resize=function(a,b){if(a!==g.width||
b!==g.height){var h=null;0!==g.width&&0!==g.height&&(h=document.createElement("canvas"),h.width=g.width,h.height=g.height,h.getContext("2d").drawImage(d,0,0,g.width,g.height,0,0,g.width,g.height));var l=f.globalCompositeOperation;d.width=a;d.height=b;h&&f.drawImage(h,0,0,g.width,g.height,0,0,g.width,g.height);f.globalCompositeOperation=l;g.width=a;g.height=b;e=0;f.save()}};this.drawImage=function(a,b,d){g.autosize&&k(a,b,d.width,d.height);f.drawImage(d,a,b)};this.transfer=function(a,b,d,e,l,m,t,w){var h=
a.getCanvas();if(!(b>=h.width||d>=h.height)&&(b+e>h.width&&(e=h.width-b),d+l>h.height&&(l=h.height-d),0!==e&&0!==l)){g.autosize&&k(m,t,e,l);a=a.getCanvas().getContext("2d").getImageData(b,d,e,l);b=f.getImageData(m,t,e,l);for(d=0;d<e*l*4;d+=4){var h=new Guacamole.Layer.Pixel(a.data[d],a.data[d+1],a.data[d+2],a.data[d+3]),p=new Guacamole.Layer.Pixel(b.data[d],b.data[d+1],b.data[d+2],b.data[d+3]);w(h,p);b.data[d]=p.red;b.data[d+1]=p.green;b.data[d+2]=p.blue;b.data[d+3]=p.alpha}f.putImageData(b,m,t)}};
this.put=function(a,b,d,e,l,m,t){var h=a.getCanvas();b>=h.width||d>=h.height||(b+e>h.width&&(e=h.width-b),d+l>h.height&&(l=h.height-d),0!==e&&0!==l&&(g.autosize&&k(m,t,e,l),a=a.getCanvas().getContext("2d").getImageData(b,d,e,l),f.putImageData(a,m,t)))};this.copy=function(a,b,d,e,l,m,t){a=a.getCanvas();b>=a.width||d>=a.height||(b+e>a.width&&(e=a.width-b),d+l>a.height&&(l=a.height-d),0!==e&&0!==l&&(g.autosize&&k(m,t,e,l),f.drawImage(a,b,d,e,l,m,t,e,l)))};this.moveTo=function(a,b){m&&(f.beginPath(),
m=!1);g.autosize&&k(a,b,0,0);f.moveTo(a,b)};this.lineTo=function(a,b){m&&(f.beginPath(),m=!1);g.autosize&&k(a,b,0,0);f.lineTo(a,b)};this.arc=function(a,b,d,e,l,u){m&&(f.beginPath(),m=!1);g.autosize&&k(a,b,0,0);f.arc(a,b,d,e,l,u)};this.curveTo=function(a,b,d,e,l,u){m&&(f.beginPath(),m=!1);g.autosize&&k(l,u,0,0);f.bezierCurveTo(a,b,d,e,l,u)};this.close=function(){f.closePath();m=!0};this.rect=function(a,b,d,e){m&&(f.beginPath(),m=!1);g.autosize&&k(a,b,d,e);f.rect(a,b,d,e)};this.clip=function(){f.clip();
m=!0};this.strokeColor=function(a,b,d,e,g,l,k){f.lineCap=a;f.lineJoin=b;f.lineWidth=d;f.strokeStyle="rgba("+e+","+g+","+l+","+k/255+")";f.stroke();m=!0};this.fillColor=function(a,b,d,e){f.fillStyle="rgba("+a+","+b+","+d+","+e/255+")";f.fill();m=!0};this.strokeLayer=function(a,b,d,e){f.lineCap=a;f.lineJoin=b;f.lineWidth=d;f.strokeStyle=f.createPattern(e.getCanvas(),"repeat");f.stroke();m=!0};this.fillLayer=function(a){f.fillStyle=f.createPattern(a.getCanvas(),"repeat");f.fill();m=!0};this.push=function(){f.save();
e++};this.pop=function(){0<e&&(f.restore(),e--)};this.reset=function(){for(;0<e;)f.restore(),e--;f.restore();f.save();f.beginPath();m=!1};this.setTransform=function(a,b,d,e,g,l){f.setTransform(a,b,d,e,g,l)};this.transform=function(a,b,d,e,g,l){f.transform(a,b,d,e,g,l)};this.setChannelMask=function(a){f.globalCompositeOperation=l[a]};this.setMiterLimit=function(a){f.miterLimit=a};d.width=b;d.height=a;d.style.zIndex=-1};Guacamole.Layer.ROUT=2;Guacamole.Layer.ATOP=6;Guacamole.Layer.XOR=10;
Guacamole.Layer.ROVER=11;Guacamole.Layer.OVER=14;Guacamole.Layer.PLUS=15;Guacamole.Layer.RIN=1;Guacamole.Layer.IN=4;Guacamole.Layer.OUT=8;Guacamole.Layer.RATOP=9;Guacamole.Layer.SRC=12;Guacamole.Layer.Pixel=function(b,a,k,g){this.red=b;this.green=a;this.blue=k;this.alpha=g};Guacamole=Guacamole||{};
Guacamole.Mouse=function(b){function a(a){a.stopPropagation();a.preventDefault&&a.preventDefault();a.returnValue=!1}function k(){f=d.touchMouseThreshold}function g(b){var e=b.deltaY||-b.wheelDeltaY||-b.wheelDelta;e?1===b.deltaMode?e=b.deltaY*d.PIXELS_PER_LINE:2===b.deltaMode&&(e=b.deltaY*d.PIXELS_PER_PAGE):e=b.detail*d.PIXELS_PER_LINE;for(m+=e;m<=-d.scrollThreshold;)d.onmousedown&&(d.currentState.up=!0,d.onmousedown(d.currentState)),d.onmouseup&&(d.currentState.up=!1,d.onmouseup(d.currentState)),
m+=d.scrollThreshold;for(;m>=d.scrollThreshold;)d.onmousedown&&(d.currentState.down=!0,d.onmousedown(d.currentState)),d.onmouseup&&(d.currentState.down=!1,d.onmouseup(d.currentState)),m-=d.scrollThreshold;a(b)}var d=this;this.touchMouseThreshold=3;this.scrollThreshold=120;this.PIXELS_PER_LINE=40;this.PIXELS_PER_PAGE=640;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmouseout=this.onmousemove=this.onmouseup=this.onmousedown=null;var f=0,m=0;b.addEventListener("contextmenu",
function(b){a(b)},!1);b.addEventListener("mousemove",function(e){a(e);if(f)f--;else if(1==b.isRelativeMouse){if(b.isPointerLockEnabled&&(d.currentState.fromClientPositionPointerLocked(b,e.movementX||e.mozMovementX||e.webkitMovementX||0,e.movementY||e.mozMovementY||e.webkitMovementY||0),d.onmousemove))d.onmousemove(d.currentState)}else if(d.currentState.fromClientPosition(b,e.clientX,e.clientY),d.onmousemove)d.onmousemove(d.currentState)},!1);b.addEventListener("mousedown",function(e){a(e);if(!f){switch(e.button){case 0:d.currentState.left=
!0;break;case 1:d.currentState.middle=!0;break;case 2:d.currentState.right=!0}1==b.isRelativeMouse&&b.isPointerLockEnabled&&d.currentState.fromClientPositionPointerLocked(b,0,0);if(d.onmousedown)d.onmousedown(d.currentState)}},!1);b.addEventListener("mouseup",function(b){a(b);if(!f){switch(b.button){case 0:d.currentState.left=!1;break;case 1:d.currentState.middle=!1;break;case 2:d.currentState.right=!1}if(d.onmouseup)d.onmouseup(d.currentState)}},!1);b.addEventListener("mouseout",function(e){e||(e=
window.event);for(var f=e.relatedTarget||e.toElement;f;){if(f===b)return;f=f.parentNode}a(e);if(d.currentState.left||d.currentState.middle||d.currentState.right)if(d.currentState.left=!1,d.currentState.middle=!1,d.currentState.right=!1,d.onmouseup)d.onmouseup(d.currentState);if(d.onmouseout)d.onmouseout()},!1);b.addEventListener("selectstart",function(b){a(b)},!1);b.addEventListener("touchmove",k,!1);b.addEventListener("touchstart",k,!1);b.addEventListener("touchend",k,!1);b.addEventListener("DOMMouseScroll",
g,!1);b.addEventListener("mousewheel",g,!1);b.addEventListener("wheel",g,!1);var e=function(){var a=document.createElement("div");if(!("cursor"in a.style))return!1;try{a.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg\x3d\x3d) 0 0, auto"}catch(h){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(a.style.cursor||"")}();this.setCursor=function(a,d,f){return e?(a=a.toDataURL("image/png"),b.style.cursor=
"url("+a+") "+d+" "+f+", auto",!0):!1}};
Guacamole.Mouse.State=function(b,a,k,g,d,f,m){var e=this;this.x=b;this.y=a;this.left=k;this.middle=g;this.right=d;this.up=f;this.down=m;this.fromClientPosition=function(a,b,d){e.x=b-a.offsetLeft;e.y=d-a.offsetTop;for(a=a.offsetParent;a&&a!==document.body;)e.x-=a.offsetLeft-a.scrollLeft,e.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;a&&(b=document.body.scrollTop||document.documentElement.scrollTop,e.x-=a.offsetLeft-(document.body.scrollLeft||document.documentElement.scrollLeft),e.y-=a.offsetTop-b)};
this.fromClientPositionPointerLocked=function(a,b,d){e.x=a.offsetWidth+b;e.y=a.offsetHeight+d}};
Guacamole.Mouse.Touchpad=function(b){var a=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;var k=0,g=0,d=0,f=0,m=0,e={1:"left",2:"right",3:"middle"},l=!1,h=null;b.addEventListener("touchend",function(b){b.preventDefault();if(l&&0===b.touches.length){b=(new Date).getTime();var d=e[k];if(a.currentState[d]){a.currentState[d]=
!1;if(a.onmouseup)a.onmouseup(a.currentState);h&&(window.clearTimeout(h),h=null)}if(b-f<=a.clickTimingThreshold&&m<a.clickMoveThreshold){a.currentState[d]=!0;if(a.onmousedown)a.onmousedown(a.currentState);h=window.setTimeout(function(){a.currentState[d]=!1;if(a.onmouseup)a.onmouseup(a.currentState);l=!1},a.clickTimingThreshold)}h||(l=!1)}},!1);b.addEventListener("touchstart",function(a){a.preventDefault();k=Math.min(a.touches.length,3);h&&(window.clearTimeout(h),h=null);l||(l=!0,a=a.touches[0],g=
a.clientX,d=a.clientY,f=(new Date).getTime(),m=0)},!1);b.addEventListener("touchmove",function(e){e.preventDefault();e=e.touches[0];var h=e.clientX-g,l=e.clientY-d;m+=Math.abs(h)+Math.abs(l);if(1===k){var r=1+m/((new Date).getTime()-f);a.currentState.x+=h*r;a.currentState.y+=l*r;0>a.currentState.x?a.currentState.x=0:a.currentState.x>=b.offsetWidth&&(a.currentState.x=b.offsetWidth-1);0>a.currentState.y?a.currentState.y=0:a.currentState.y>=b.offsetHeight&&(a.currentState.y=b.offsetHeight-1);if(a.onmousemove)a.onmousemove(a.currentState);
g=e.clientX;d=e.clientY}else if(2===k&&Math.abs(l)>=a.scrollThreshold){h=0<l?"down":"up";a.currentState[h]=!0;if(a.onmousedown)a.onmousedown(a.currentState);a.currentState[h]=!1;if(a.onmouseup)a.onmouseup(a.currentState);g=e.clientX;d=e.clientY}},!1)};
Guacamole.Mouse.Touchscreen=function(b){function a(a){if(!e.currentState[a]&&(e.currentState[a]=!0,e.onmousedown))e.onmousedown(e.currentState)}function k(a){if(e.currentState[a]&&(e.currentState[a]=!1,e.onmouseup))e.onmouseup(e.currentState)}function g(a,d){e.currentState.fromClientPosition(b,a,d);if(e.onmousemove)e.onmousemove(e.currentState)}function d(a){var b=a.touches[0]||a.changedTouches[0];a=b.clientX-h;b=b.clientY-p;return Math.sqrt(a*a+b*b)>=e.clickMoveThreshold}function f(a){a=a.touches[0];
l=!0;h=a.clientX;p=a.clientY}function m(){window.clearTimeout(n);window.clearTimeout(q);l=!1}var e=this,l=!1,h=null,p=null,n=null,q=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,!1,!1,!1,!1,!1);this.onmousemove=this.onmouseup=this.onmousedown=null;b.addEventListener("touchend",function(b){l&&(0!==b.touches.length||1!==b.changedTouches.length?
m():(window.clearTimeout(q),k("left"),d(b)||(b.preventDefault(),e.currentState.left||(b=b.changedTouches[0],g(b.clientX,b.clientY),a("left"),n=window.setTimeout(function(){k("left");m()},e.clickTimingThreshold)))))},!1);b.addEventListener("touchstart",function(b){1!==b.touches.length?m():(b.preventDefault(),f(b),window.clearTimeout(n),q=window.setTimeout(function(){var d=b.touches[0];g(d.clientX,d.clientY);a("right");k("right");m()},e.longPressThreshold))},!1);b.addEventListener("touchmove",function(a){l&&
(d(a)&&window.clearTimeout(q),1!==a.touches.length?m():e.currentState.left&&(a.preventDefault(),a=a.touches[0],g(a.clientX,a.clientY)))},!1)};Guacamole=Guacamole||{};
Guacamole.OnScreenKeyboard=function(b){function a(a){var b=l[a];b||(b=h,h<<=1,l[a]=b);return b}function k(a,b,c,d){this.width=b;this.height=c;this.scale=function(e){a.style.width=b*e+"px";a.style.height=c*e+"px";d&&(a.style.lineHeight=c*e+"px",a.style.fontSize=e+"px")}}function g(a,b){for(var c=a.childNodes,d=0;d<c.length;d++){var e=c[d];if(e.tagName){var f=b[e.tagName];if(f)f(e);else throw Error("Unexpected "+e.tagName+" within "+a.tagName);}}}var d=this,f=0,m={},e=[],l={},h=1,p,n;this.touchMouseThreshold=
3;var q=0;Node.classList?(p=function(a,b){a.classList.add(b)},n=function(a,b){a.classList.remove(b)}):(p=function(a,b){a.className+=" "+b},n=function(a,b){a.className=a.className.replace(/([^ ]+)[ ]*/g,function(a,d,e,f,g){return d==b?"":a})});var r=document.createElement("div");r.className="guac-keyboard";var u=new XMLHttpRequest;u.open("GET",b,!1);u.send(null);if(b=u.responseXML){var t=function(a){var b=document.createElement("div");b.className="guac-keyboard-column";b.getAttribute("align")&&(b.style.textAlign=
b.getAttribute("align"));g(a,{row:function(a){b.appendChild(w(a))}});return b},w=function(b){var h=document.createElement("div");h.className="guac-keyboard-row";g(b,{column:function(a){h.appendChild(t(a))},gap:function(a){var b=document.createElement("div");b.className="guac-keyboard-gap";var c=1;a.getAttribute("size")&&(c=parseFloat(a.getAttribute("size")));e.push(new k(b,c,c));h.appendChild(b)},key:function(b){function c(){if(!A.pressed){p(v,"guac-keyboard-pressed");var b=A.getCap(f);if(b.modifier){var c=
"guac-keyboard-modifier-"+b.modifier,e=a(b.modifier);f^=e;if(f&e){if(p(r,c),m[b.modifier]=b.keysym,d.onkeydown&&b.keysym)d.onkeydown(b.keysym)}else if(e=m[b.modifier],n(r,c),delete m[b.modifier],d.onkeyup&&e)d.onkeyup(e)}else if(d.onkeydown&&b.keysym)d.onkeydown(b.keysym);A.pressed=!0}}function l(){if(A.pressed){var a=A.getCap(f);n(v,"guac-keyboard-pressed");if(!a.modifier&&d.onkeyup&&a.keysym)d.onkeyup(a.keysym);A.pressed=!1}}function z(a){a.preventDefault();0==q&&l()}var v=document.createElement("div");
v.className="guac-keyboard-key";b.getAttribute("class")&&(v.className+=" "+b.getAttribute("class"));var t=document.createElement("div");t.className="guac-keyboard-key-container";t.appendChild(v);var A=new Guacamole.OnScreenKeyboard.Key,u=1;b.getAttribute("size")&&(u=parseFloat(b.getAttribute("size")));A.size=u;g(b,{cap:function(b){var c=b.textContent||b.text;0==c.length&&(c=" ");var d=null;if(b.getAttribute("keysym"))d=parseInt(b.getAttribute("keysym"));else if(1==c.length){var e=c.charCodeAt(0);
0<=e&&255>=e?d=e:256<=e&&1114111>=e&&(d=16777216|e)}d=new Guacamole.OnScreenKeyboard.Cap(c,d);b.getAttribute("modifier")&&(d.modifier=b.getAttribute("modifier"));e=document.createElement("div");e.className="guac-keyboard-cap";e.textContent=c;v.appendChild(e);b.getAttribute("class")&&(e.className+=" "+b.getAttribute("class"));c=0;if(b.getAttribute("if")){b=b.getAttribute("if").split(",");for(var f=0;f<b.length;f++)c|=a(b[f]),p(e,"guac-keyboard-requires-"+b[f]),p(v,"guac-keyboard-uses-"+b[f])}A.modifierMask|=
c;A.caps[c]=d}});e.push(new k(t,u,1,!0));h.appendChild(t);v.addEventListener("touchstart",function(a){a.preventDefault();q=d.touchMouseThreshold;c()},!0);v.addEventListener("touchend",function(a){a.preventDefault();q=d.touchMouseThreshold;l()},!0);v.addEventListener("mousedown",function(a){a.preventDefault();0==q&&c()},!0);v.addEventListener("mouseup",z,!0);v.addEventListener("mouseout",z,!0)}});return h};b=b.documentElement;if("keyboard"!=b.tagName)throw Error("Root element must be keyboard");if(!b.getAttribute("size"))throw Error("size attribute is required for keyboard");
var x=parseFloat(b.getAttribute("size"));g(b,{row:function(a){r.appendChild(w(a))},column:function(a){r.appendChild(t(a))}})}r.onselectstart=r.onmousemove=r.onmouseup=r.onmousedown=function(a){q&&q--;a.stopPropagation();return!1};this.onkeyup=this.onkeydown=null;this.getElement=function(){return r};this.resize=function(a){a=Math.floor(10*a/x)/10;for(var b=0;b<e.length;b++)e[b].scale(a)}};
Guacamole.OnScreenKeyboard.Key=function(){var b=this;this.pressed=!1;this.size=1;this.caps={};this.modifierMask=0;this.getCap=function(a){return b.caps[a&b.modifierMask]}};Guacamole.OnScreenKeyboard.Cap=function(b,a,k){this.modifier=null;this.text=b;this.keysym=a;k&&(this.modifier=k)};Guacamole=Guacamole||{};Guacamole.OutputStream=function(b,a){var k=this;this.index=a;this.onack=null;this.sendBlob=function(a){b.sendBlob(k.index,a)};this.sendEnd=function(){b.endStream(k.index)}};
Guacamole=Guacamole||{};
Guacamole.Parser=function(){var b=this,a="",k=[],g=-1,d=0;this.receive=function(f){4096<d&&g>=d&&(a=a.substring(d),g-=d,d=0);for(a+=f;g<a.length;){if(g>=d){f=a.substring(d,g);var m=a.substring(g,g+1);k.push(f);if(";"==m){f=k.shift();if(null!=b.oninstruction)b.oninstruction(f,k);k.length=0}else if(","!=m)throw Error("Illegal terminator.");d=g+1}f=a.indexOf(".",d);if(-1!=f){m=parseInt(a.substring(g+1,f));if(NaN==m)throw Error("Non-numeric character in element length.");d=f+1;g=d+m}else{d=a.length;break}}};
this.oninstruction=null};Guacamole=Guacamole||{};Guacamole.Status=function(b,a){var k=this;this.code=b;this.message=a;this.isError=function(){return 0>k.code||255<k.code}};Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797};
Guacamole=Guacamole||{};
Guacamole.StringReader=function(b){var a=this;b=new Guacamole.ArrayBufferReader(b);var k=0,g=0;b.ondata=function(b){var d="";b=new Uint8Array(b);for(var m=0;m<b.length;m++){var e=b[m];0===k?127===(e|127)?d+=String.fromCharCode(e):223===(e|31)?(g=e&31,k=1):239===(e|15)?(g=e&15,k=2):247===(e|7)?(g=e&7,k=3):d+="�":191===(e|63)?(g=g<<6|e&63,k--,0===k&&(d+=String.fromCharCode(g))):(k=0,d+="�")}if(a.ontext)a.ontext(d)};b.onend=function(){if(a.onend)a.onend()};this.onend=this.ontext=null};
Guacamole=Guacamole||{};
Guacamole.StringWriter=function(b){function a(b){var d,e;if(127>=b)d=0,e=1;else if(2047>=b)d=192,e=2;else if(65535>=b)d=224,e=3;else if(2097151>=b)d=240,e=4;else{a(65533);return}var g=e;if(m+g>=f.length){var k=new Uint8Array(2*(m+g));k.set(f);f=k}m+=g;g=m-1;for(k=1;k<e;k++)f[g--]=128|b&63,b>>=6;f[g]=d|b}function k(b){for(var d=0;d<b.length;d++){var e=b.charCodeAt(d);a(e)}if(0<m)return b=f.subarray(0,m),m=0,b}var g=this,d=new Guacamole.ArrayBufferWriter(b),f=new Uint8Array(8192),m=0;d.onack=function(a){if(g.onack)g.onack(a)};
this.sendText=function(a){d.sendData(k(a))};this.sendEnd=function(){d.sendEnd()};this.onack=null};Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(b){};this.disconnect=function(){};this.sendMessage=function(b){};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15E3;this.oninstruction=this.onstatechange=this.onerror=null};Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2};
Guacamole.HTTPTunnel=function(b){function a(){window.clearTimeout(w);w=window.setTimeout(function(){k(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},e.receiveTimeout)}function k(a){if(e.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&e.onerror&&(e.state===Guacamole.Tunnel.State.CONNECTING||a.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND))e.onerror(a);e.state=Guacamole.Tunnel.State.CLOSED;if(e.onstatechange)e.onstatechange(e.state)}}
function g(){if(e.state===Guacamole.Tunnel.State.OPEN)if(0<u.length){r=!0;var a=new XMLHttpRequest;a.open("POST",n+l);a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset\x3dUTF-8");a.onreadystatechange=function(){4===a.readyState&&(200!==a.status?d(a):g())};a.send(u);u=""}else r=!1}function d(a){var b=parseInt(a.getResponseHeader("Guacamole-Status-Code"));a=a.getResponseHeader("Guacamole-Error-Message");k(new Guacamole.Status(b,a))}function f(b){function g(){if(e.state!==
Guacamole.Tunnel.State.OPEN)null!==c&&clearInterval(c);else if(!(2>b.readyState)){var l;try{l=b.status}catch(B){l=200}h||200!==l||(h=m());if(3===b.readyState||4===b.readyState)if(a(),1===q&&(3!==b.readyState||c?4!==b.readyState||c||clearInterval(c):c=setInterval(g,30)),0===b.status)e.disconnect();else if(200!==b.status)d(b);else{var r;try{r=b.responseText}catch(B){return}for(;k<r.length;){if(k>=n){l=r.substring(n,k);var v=r.substring(k,k+1);p.push(l);if(";"===v){l=p.shift();if(e.oninstruction)e.oninstruction(l,
p);p.length=0}n=k+1}l=r.indexOf(".",n);if(-1!==l){v=parseInt(r.substring(k+1,l));if(0===v){c||clearInterval(c);b.onreadystatechange=null;b.abort();h&&f(h);break}n=l+1;k=n+v}else{n=r.length;break}}}}}var c=null,h=null,l=0,k=-1,n=0,p=[];b.onreadystatechange=1===q?function(){3===b.readyState&&(l++,2<=l&&(q=0,b.onreadystatechange=g));g()}:g;g()}function m(){var a=new XMLHttpRequest;a.open("GET",p+l+":"+x++);a.send(null);return a}var e=this,l,h=b+"?connect",p=b+"?read:",n=b+"?write:",q=1,r=!1,u="",t=0,
w=null;this.sendMessage=function(){function a(a){a=new String(a);return a.length+"."+a}if(e.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var b=performance.now()-t|0,b=a(b),c=0;c<arguments.length;c++)b+=","+a(arguments[c]);u+=b+";";r||g()}};var x=0;this.connect=function(b){a();var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4===g.readyState)if(200!==g.status)d(g);else{a();l=g.responseText;e.state=Guacamole.Tunnel.State.OPEN;if(e.onstatechange)e.onstatechange(e.state);
f(m())}};g.open("POST",h,!0);g.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset\x3dUTF-8");g.send(b);t=performance.now()};this.disconnect=function(){k(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel;
Guacamole.WebSocketTunnel=function(b){function a(){window.clearTimeout(f);f=window.setTimeout(function(){k(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},g.receiveTimeout)}function k(a){if(g.state!==Guacamole.Tunnel.State.CLOSED){if(a.code!==Guacamole.Status.Code.SUCCESS&&g.onerror)g.onerror(a);g.state=Guacamole.Tunnel.State.CLOSED;if(g.onstatechange)g.onstatechange(g.state);d.close()}}var g=this,d=null,f=null,m={"http:":"ws:","https:":"wss:"};if("ws:"!==b.substring(0,
3)&&"wss:"!==b.substring(0,4))if(m=m[window.location.protocol],"/"===b.substring(0,1))b=m+"//"+window.location.host+b;else{var e=window.location.pathname.lastIndexOf("/"),e=window.location.pathname.substring(0,e+1);b=m+"//"+window.location.host+e+b}this.sendMessage=function(a){function b(a){a=new String(a);return a.length+"."+a}if(g.state===Guacamole.Tunnel.State.OPEN&&0!==arguments.length){for(var e=b(arguments[0]),f=1;f<arguments.length;f++)e+=","+b(arguments[f]);d.send(e+";")}};this.connect=function(e){a();
d=new WebSocket(b+"?"+e,"guacamole");d.onopen=function(b){a();g.state=Guacamole.Tunnel.State.OPEN;if(g.onstatechange)g.onstatechange(g.state)};d.onclose=function(a){k(new Guacamole.Status(parseInt(a.reason),a.reason))};d.onerror=function(a){k(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,a.data))};d.onmessage=function(b){a();b=b.data;var d=0,e,f=[];do{var h=b.indexOf(".",d);-1!==h?(e=parseInt(b.substring(e+1,h)),d=h+1,e=d+e):k(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."));
d=b.substring(d,e);h=b.substring(e,e+1);f.push(d);if(";"===h){d=f.shift();if(g.oninstruction)g.oninstruction(d,f);f.length=0}d=e+1}while(d<b.length)}};this.disconnect=function(){k(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel;
Guacamole.ChainedTunnel=function(b){function a(b){function e(){var e=d.shift();e&&(b.onerror=null,b.oninstruction=null,b.onstatechange=null,a(e));return e}function f(){b.onstatechange=k.onstatechange;b.oninstruction=k.oninstruction;b.onerror=k.onerror}k.disconnect=b.disconnect;k.sendMessage=b.sendMessage;b.onstatechange=function(a){switch(a){case Guacamole.Tunnel.State.OPEN:f();if(k.onstatechange)k.onstatechange(a);break;case Guacamole.Tunnel.State.CLOSED:if(!e()&&k.onstatechange)k.onstatechange(a)}};
b.oninstruction=function(a,b){f();if(k.oninstruction)k.oninstruction(a,b)};b.onerror=function(a){if(!e()&&k.onerror)k.onerror(a)};b.connect(g)}for(var k=this,g,d=[],f=0;f<arguments.length;f++)d.push(arguments[f]);this.connect=function(b){g=b;if(b=d.shift())a(b);else if(k.onerror)k.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel;Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.5";